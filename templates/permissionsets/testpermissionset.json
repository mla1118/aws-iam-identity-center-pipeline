{
    "Name": "testpermissionset",
    "Description": "testpermissionset",
    "SessionDuration": "PT1H",
    "ManagedPolicies": [
        "arn:aws:iam::aws:policy/AWSSSOReadOnly"
    ],
    "CustomPolicy": "{\r\n    \"Version\": \"2012-10-17\",\r\n    \"Statement\": [\r\n        {\r\n            \"Sid\": \"RDSPermission\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"rds:Describe*\",\r\n                \"rds:*ReadReplica\",\r\n                \"rds:CrossRegionCommunication\",\r\n                \"rds:List*\",\r\n                \"rds:*Cluster*\",\r\n                \"rds:*DB*\",\r\n                \"rds:ApplyPendingMaintenanceAction\",\r\n                \"rds:*Group*\",\r\n                \"dms:CreateReplicationSubnetGroup\",\r\n                \"dms:CreateReplicationInstance\",\r\n                \"dms:CreateEndpoint\",\r\n                \"dms:CreateReplicationTask\",\r\n                \"dms:StartReplicationTask\",\r\n                \"dms:StopReplicationTask\",\r\n                \"dms:StartReplication\",\r\n                \"dms:StopReplication\",\r\n                \"dms:ModifyEndpoint\",\r\n                \"dms:ModifyReplicationTask\",\r\n                \"dms:ModifyReplicationSubnetGroup\",\r\n                \"dms:ModifyReplicationInstance\",\r\n                \"dms:DeleteReplicationTask\",\r\n                \"dms:DeleteReplicationSubnetGroup\",\r\n                \"dms:DeleteEndpoint\",\r\n                \"dms:DeleteReplicationInstance\",\r\n                \"dms:TestConnection\",\r\n                \"dms:List*\",\r\n                \"dms:Describe*\",\r\n                \"kms:List*\",\r\n                \"kms:Describe*\",\r\n                \"iam:List*\",\r\n                \"route53:List*\",\r\n                \"route53:Get*\",\r\n                \"lambda:List*\",\r\n                \"lambda:Get*\",\r\n                \"logs:DescribeLogGroups\"\r\n            ],\r\n            \"Resource\": \"*\"\r\n        },\r\n        {\r\n            \"Sid\": \"DenyToCreateSubnet\",\r\n            \"Effect\": \"Deny\",\r\n            \"Action\": [\r\n                \"rds:CreateDBSubnetGroup\",\r\n                \"rds:ModifyDBSubnetGroup\"\r\n            ],\r\n            \"Resource\": \"*\"\r\n        },\r\n        {\r\n            \"Sid\": \"RotateAnalyticsSecret\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"secretsmanager:RotateSecret\",\r\n            \"Resource\": \"arn:aws:secretsmanager:*:*:secret:secret/analytics*\"\r\n        },\r\n        {\r\n            \"Sid\": \"KMSAccessForRDS\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"kms:Encrypt\",\r\n                \"kms:Decrypt\",\r\n                \"kms:GenerateDataKey\",\r\n                \"kms:ReEncrypt*\",\r\n                \"kms:CreateGrant\"\r\n            ],\r\n            \"Resource\": \"*\",\r\n            \"Condition\": {\r\n                \"StringLike\": {\r\n                    \"kms:ViaService\": [\r\n                        \"rds.*.amazonaws.com\",\r\n                        \"dms.us-west-2.amazonaws.com\"\r\n                    ]\r\n                }\r\n            }\r\n        },\r\n        {\r\n            \"Sid\": \"RDSEnhancedMonitoring\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"iam:PassRole\",\r\n                \"iam:GetRole\"\r\n            ],\r\n            \"Resource\": [\r\n                \"arn:aws:iam::*:role/rds-monitoring-role\",\r\n                \"arn:aws:iam::*:role/dms-vpc-role\",\r\n                \"arn:aws:iam::*:role/dms-cloudwatch-logs-role\"\r\n            ],\r\n            \"Condition\": {\r\n                \"StringLike\": {\r\n                    \"iam:PassedToService\": [\r\n                        \"rds.amazonaws.com\",\r\n                        \"dms.amazonaws.com\"\r\n                    ]\r\n                }\r\n            }\r\n        },\r\n        {\r\n            \"Sid\": \"CreateCWLogs\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"logs:CreateLogStream\",\r\n                \"logs:DescribeLogStreams\",\r\n                \"logs:PutRetentionPolicy\",\r\n                \"logs:CreateLogGroup\",\r\n                \"logs:GetLogEvents\",\r\n                \"logs:PutLogEvents\",\r\n                \"logs:PutSubscriptionFilter\",\r\n                \"logs:GetLogRecord\"\r\n            ],\r\n            \"Resource\": [\r\n                \"arn:aws:logs:*:*:log-group:/aws/rds/*\",\r\n                \"arn:aws:logs:*:*:log-group:dms-*\"\r\n            ]\r\n        },\r\n        {\r\n            \"Sid\": \"AllowingPerformanceInsightsMetrics\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"pi:*\",\r\n            \"Resource\": \"arn:aws:pi:*:*:metrics/rds/*\"\r\n        },\r\n        {\r\n            \"Sid\": \"AllowCreationOfServiceLinkedRole\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"iam:CreateServiceLinkedRole\",\r\n            \"Resource\": \"*\",\r\n            \"Condition\": {\r\n                \"StringLike\": {\r\n                    \"iam:AWSServiceName\": [\r\n                        \"rds.amazonaws.com\"\r\n                    ]\r\n                }\r\n            }\r\n        },\r\n        {\r\n            \"Sid\": \"CloudformationAccess\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"cloudformation:*\",\r\n            \"Resource\": [\r\n                \"arn:aws:cloudformation:*:*:stackset/*misc*:*\",\r\n                \"arn:aws:cloudformation:*:*:stack/*misc*/*\"\r\n            ]\r\n        },\r\n        {\r\n            \"Sid\": \"SecretsManagerAccessForDBAAdmin\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"secretsmanager:GetResourcePolicy\",\r\n                \"secretsmanager:GetSecretValue\",\r\n                \"secretsmanager:DescribeSecret\",\r\n                \"secretsmanager:ListSecretVersionIds\"\r\n            ],\r\n            \"Resource\": [\r\n                \"arn:aws:secretsmanager:*:*:secret:rds!*\"\r\n            ]\r\n        },\r\n        {\r\n            \"Sid\": \"CFNUpload\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"s3:GetObject\",\r\n                \"s3:PutObject\",\r\n                \"s3:DeleteObject\",\r\n                \"s3:ListBucket\"\r\n            ],\r\n            \"Resource\": [\r\n                \"arn:aws:s3:::cf-templates-12ng9vu1yw8v2-*\",\r\n                \"arn:aws:s3:::cf-templates-12ng9vu1yw8v2-*/*\",\r\n                \"arn:aws:s3:::cf-templates-zynp0vag46jn-*\",\r\n                \"arn:aws:s3:::cf-templates-zynp0vag46jn-*/*\",\r\n                \"arn:aws:s3:::cf-templates-3fztqvmk029m-*\",\r\n                \"arn:aws:s3:::cf-templates-3fztqvmk029m-*/*\",\r\n                \"arn:aws:s3:::cf-templates-mmlcglswckwm-*\",\r\n                \"arn:aws:s3:::cf-templates-mmlcglswckwm-*/*\",\r\n                \"arn:aws:s3:::cf-templates-4dat7odl2ad6-*\",\r\n                \"arn:aws:s3:::cf-templates-4dat7odl2ad6-*/*\",\r\n                \"arn:aws:s3:::cf-templates-1bey8pxboqm2k-*\",\r\n                \"arn:aws:s3:::cf-templates-1bey8pxboqm2k-*/*\"\r\n            ],\r\n            \"Condition\": {\r\n                \"ForAnyValue:StringEquals\": {\r\n                    \"aws:CalledVia\": \"cloudformation.amazonaws.com\"\r\n                }\r\n            }\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"route53:ChangeResourceRecordSets\",\r\n            \"Resource\": [\r\n                \"arn:aws:route53:::hostedzone/Z04407061YB9OEA606ABA\",\r\n                \"arn:aws:route53:::hostedzone/Z1N6C7FRGU839\",\r\n                \"arn:aws:route53:::hostedzone/Z0481542VIEOTFRIAKFK\",\r\n                \"arn:aws:route53:::hostedzone/Z8QN6IUXKULDE\",\r\n                \"arn:aws:route53:::hostedzone/Z087736634CMBA4Q0XH1I\",\r\n                \"arn:aws:route53:::hostedzone/Z2RJG25CPZGLTE\"\r\n            ],\r\n            \"Condition\": {\r\n                \"ForAnyValue:StringLike\": {\r\n                    \"route53:ChangeResourceRecordSetsActions\": [\r\n                        \"CREATE\",\r\n                        \"UPSERT\"\r\n                    ]\r\n                }\r\n            }\r\n        },\r\n        {\r\n            \"Sid\": \"invokeDBlambda\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"lambda:InvokeFunction\",\r\n                \"lambda:UpdateFunctionConfiguration\"\r\n            ],\r\n            \"Resource\": [\r\n                \"arn:aws:lambda:*:*:function:*SNAPSHOT*\",\r\n                \"arn:aws:lambda:*:*:function:*snapshot*\",\r\n                \"arn:aws:lambda:*:*:function:*Snapshot*\"\r\n            ]\r\n        },\r\n        {\r\n            \"Sid\": \"AddTagging\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"rds:AddTagsToResource\",\r\n                \"rds:RemoveTagsFromResource\"\r\n            ],\r\n            \"Resource\": \"*\"\r\n        },\r\n\t\t{\r\n\t\t\t\"Sid\": \"ListActions\",\r\n\t\t\t\"Effect\": \"Allow\",\r\n\t\t\t\"Action\": [\r\n\t\t\t\t\"secretsmanager:ListSecrets\",\r\n\t\t\t\t\"cloudformation:List*\",\r\n\t\t\t\t\"cloudformation:get*\"\r\n\t\t\t],\r\n\t\t\t\"Resource\": \"*\"\r\n\t\t}\r\n    ]\r\n}"
}